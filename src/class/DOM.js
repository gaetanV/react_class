import jQuery from 'jquery';
var DOM;!function(){"use strict";DOM=function(){var a={fps:24},b={mouseup:[],click:[],mousemove:[],mousewheel:[],refresh:[],resize:[]},c=function(a){if(a.targetTouches){if(1===a.targetTouches.length){var b=a.targetTouches[0];a.touch={x:b.pageX,y:b.pageY}}}else a.touch={x:a.clientX,y:a.clientY}},d={refresh:function(){for(var a in b.refresh)b.refresh[a]()},click:function(a){c(a);for(var d in b.click)b.click[d](a);return!1},resize:function(a){c(a);for(var d in b.resize)b.resize[d](a);return!1},mousemove:function(a){c(a);for(var d in b.mousemove)b.mousemove[d](a)},mousewheel:function(a){c(a);for(var d in b.mousewheel)b.mousewheel[d](a)},mouseup:function(a){c(a);for(var d in b.mouseup)b.mouseup[d](a)}};return setInterval(d.refresh,a.fps),window.addEventListener("resize",d.resize),document.addEventListener(/Firefox/i.test(navigator.userAgent)?"DOMMouseScroll":"mousewheel",d.mousewheel),"ontouchstart"in window||navigator.maxTouchPoints?(document.addEventListener("touchstart",d.click),document.addEventListener("touchmove",d.mousemove),document.addEventListener("touchend",d.mouseup),document.addEventListener("touchleave",d.mouseup)):(document.addEventListener("mousedown",d.click),document.addEventListener("mousemove",d.mousemove),document.addEventListener("mouseup",d.mouseup),document.addEventListener("mouseout",function(a){null==a.toElement&&null==a.relatedTarget&&d.mouseup(a)})),{extendDOM:function(a){"undefined"!=typeof jQuery&&jQuery.fn.extend(a);for(var b in a)HTMLElement.prototype[b]=a[b]},extendEVENT:function(a){for(var c in a)switch(c){default:throw c+" is not a known extendEVENT";case"click":b.click.push(a[c]);break;case"mouseup":b.mouseup.push(a[c]);break;case"mousemove":b.mousemove.push(a[c]);break;case"mousewheel":b.mousewheel.push(a[c]);break;case"refresh":b.refresh.push(a[c]);break;case"resize":b.resize.push(a[c])}},selection:function(a){if(a){var b=document.querySelector("*");b.style.MozUserSelect="text",b.style.webkitUserSelect="text",b.style.oUserSelect="text",b.style.khtmlUserSelect="text",b.style.msUserSelect="text",b.style.userSelect="text"}else{var b=document.querySelector("*");b.style.MozUserSelect="none",b.style.webkitUserSelect="none",b.style.oUserSelect="none",b.style.khtmlUserSelect="none",b.style.msUserSelect="none",b.style.userSelect="none"}}}}(),DOM.selection(!1)}(),function(){"use strict";DOM.extendDOM({toNatif:function(){return"undefined"!=typeof jQuery&&this instanceof jQuery?this[0]:this},getTransform:function(){var a=window.getComputedStyle(this.toNatif()),b=0,c=0,d=a.transform;if("none"!==d){var e=/\((.*)\)/,f=e.exec(d),g=f[1].split(",");b=parseInt(g[4]),c=parseInt(g[5])}return{x:b,y:c}},inPage:function(){var a=this.toNatif();return a!==document.body&&document.body.contains(a)}}),HTMLElement.prototype.removeClass=function(a){if("string"==typeof a){a=a.trim();var b,c,d;d=a.split(" "),c=this.className.split(" ");for(var e=0;e<d.length;e++){var f=d[e];b=c.indexOf(f),b!==-1&&c.splice(b,1)}return this.className=c.join(" "),!0}return!1},HTMLElement.prototype.addClass=function(a){if("string"==typeof a){a=a.trim();var b,c;b=this.className?this.className.split(" "):[],c=a.split(" ");for(var d=0;d<c.length;d++){var e=c[d];b.indexOf(e)===-1&&b.push(e)}return this.className=b.join(" "),!0}return!1}}(),function(){"use strict";var a=function(a,b,c,d){var e=[1,0,0,1,0,0],f=performance.now(),g=window.getComputedStyle(a),h=g.transform;if("none"!=h){var i=/\((.*)\)/.exec(h);e=i[1].split(",")}this.matrix=e,this.timeStart=f,this.timeEnd=f,this.speed=c,this.dom=a,this.css={transitionDuration:g.transitionDuration,transitionProperty:g.transitionProperty,transitionDelay:g.transitionDelay},a.style.transition="none";var j=a.getTransform(),k=parseInt(a.style.left),l=parseInt(a.style.top);0===j.y&&0===j.x||(a.offsetHeight,0!==j.y&&(a.style.top=l+j.y+"px"),0!==j.x&&(a.style.left=k+j.x+"px")),this.css.left=g.left,this.css.top=g.top,this.transform={start:{x:0,y:0},end:{x:0,y:0}},this.pos={start:{x:k,y:l},end:{x:k,y:l}},this.way=b,this.callback=d,this.refresh=!1},b=!1;DOM.extendDOM({move:function(c,d,e){var f=this.toNatif();b=new a(f,c,d,e)}}),DOM.extendEVENT({refresh:function(){if(b){var a=b;if(a.refresh){var c=a.refresh.touch,d=0,e=0;switch(a.way){case"-x":d+=(a.mouse.x-c.x)*a.speed;break;case"x":d-=(a.mouse.x-c.x)*a.speed;break;case"-y":e+=(a.mouse.y-c.y)*a.speed;break;case"y":e-=(a.mouse.y-c.y)*a.speed;break;case"xy":d-=(a.mouse.x-c.x)*a.speed,e-=(a.mouse.y-c.y)*a.speed}a.transform.end={y:e,x:d},a.dom.style.transform="matrix("+a.matrix[0]+","+a.matrix[1]+","+a.matrix[2]+","+a.matrix[3]+", "+d+", "+e+")",a.refresh=!1}}},mousemove:function(a){b&&(b.mouse||(b.mouse=a.touch),b.refresh=a)},mouseup:function(a){b&&c.stopDragAndDrop()}});var c={stopDragAndDrop:function(){b.pos.end={x:parseInt(b.css.left)+b.transform.end.x,y:parseInt(b.css.top)+b.transform.end.y},b.timeEnd=performance.now();var a=window.getComputedStyle(b.dom);b.dom.style.transform="matrix("+b.matrix[0]+","+b.matrix[1]+","+b.matrix[2]+","+b.matrix[3]+",0,0)","absolute"!=a.position&&"fixed"!=a.position&&"relative"!=a.position||(b.dom.style.top=parseInt(b.css.top)+b.transform.end.y+"px",b.dom.style.left=parseInt(b.css.left)+b.transform.end.x+"px");var c=b.timeEnd-b.timeStart,d=Math.abs(b.transform.end.x),e=Math.abs(b.transform.end.y);b.vitesse={x:1/(1*c/d),y:1/(1*c/e)},b.dom.offsetHeight,b.dom.style.transitionDuration=b.css.transitionDuration,b.dom.style.transitionProperty=b.css.transitionProperty,b.dom.style.transitionDelay=b.css.transitionDelay,b.callback(b),b=!1}}}(),function(){"use strict";var a=!1,b="data-touchevent",c={timeLongclick:400,timeDbclick:200,debug:!1},d=!1,e={x:window.innerWidth,y:window.innerHeight},f=function(b){this.target=b.target,this.timeStart=performance.now(),this.mouseStart={x:b.touch.x,y:b.touch.y},this.vitesse={x:0,y:0},this.origin=b.target,this.mouseEnd={x:b.touch.x,y:b.touch.y},this.etat="init",a&&clearTimeout(a)},g=function(a){c.debug&&console.log(a)},h=function(a,c){for(;null!==a;){if(a[b]&&"function"==typeof a[b][c])return a;var a=a.parentNode}return!1};DOM.extendDOM({touchevent:function(a,c){var d=this.toNatif(),e=function(a,c){if("function"!=typeof c)throw"callback need to be a function";if(!d.inPage())throw"We can't register a event on a dom not in body";if(d[b]||(d[b]={}),d[b][a])throw"Event "+a+" is already defined";d[b][a]=c};switch(a){default:throw a+"is not a known event try touchX or touchY";case"click":e("click",c);break;case"longclick":e("longclick",c);break;case"longclickup":e("longclickup",c);break;case"touchX":e("touchX",c);break;case"touchY":e("touchY",c);break;case"dbclick":e("dbclick",c);break;case"scrollUp":e("scrollUp",c);break;case"scrollDown":e("scrollDown",c);break;case"resizeX":e("resizeX",c),d.addClass("resizeX");break;case"resizeY":e("resizeY",c),d.addClass("resizeY")}}}),DOM.extendEVENT({resize:function(a){var c={x:window.innerWidth,y:window.innerHeight};if(c.x!==e.x){e.x=c.x;for(var d=document.querySelectorAll(".resizeX"),f=0;f<d.length;f++){var g=d[f];g[b]&&"function"==typeof g[b].resizeX&&g[b].resizeX(a)}}if(c.y!==e.y){e.y=c.y;for(var d=document.querySelectorAll(".resizeY"),f=0;f<d.length;f++){var g=d[f];g[b]&&"function"==typeof g[b].resizeY&&g[b].resizeY(a)}}},click:function(b){d?"waitclick"===d.etat&&i.stopDbClick():(g("init"),d=new f(b),d.timeout&&clearTimeout(d.timeout),a=setTimeout(function(){i.startLongClick()},c.timeLongclick))},mousemove:function(a){d&&"init"===d.etat&&(Math.abs(a.touch.x-d.mouseStart.x)>4||Math.abs(a.clientY-d.mouseStart.y)>4)&&i.stopFindYourWay(a)},mouseup:function(b){if(d)switch(d.etat){default:g("event end by mouseup"),d=!1;break;case"waitlongclick":i.stopLongClick();break;case"init":var e=h(d.target,"dbclick");e?(g("waitclick"),d.etat="waitclick",a&&clearTimeout(a),a=setTimeout(function(){"waitclick"===d.etat&&i.stopClick()},c.timeDbclick)):i.stopClick()}},mousewheel:function(a){d||(d=new f(a),d.etat="scroll",a.detail>0?i.stopScrollDown():i.stopScrollUp(),"scrollUp"!==d.etat&&"scrollDown"!==d.etat||a.preventDefault(),d=!1)}});var i={stopScrollUp:function(){if(d&&"scroll"===d.etat){var a=h(d.target,"scrollUp");a&&(d.target=a,d.etat="scrollUp",a[b].scrollUp(d))}},stopScrollDown:function(){if(d&&"scroll"===d.etat){var a=h(d.target,"scrollDown");a&&(d.target=a,d.etat="scrollDown",a[b].scrollDown(d))}},startLongClick:function(){if(d&&"init"===d.etat){var a=d.target,c=h(d.target,"longclick");c&&(d.etat="waitlongclick",g("waitlongclick"),a[b].longclick(d),d.target=c)}},stopLongClick:function(){if(!d)throw"stopLongClick is call without event";var a=d.target;d.etat="longclick",g("longclick"),a[b]&&"function"==typeof a[b].longclickup&&a[b].longclickup(d),d=!1},stopClick:function(){if(d){if("init"===d.etat||"waitclick"===d.etat){d.etat="click",g("click");var a=d.target,c=h(d.target,"click");c&&a[b].click(d)}d=!1}},stopDbClick:function(){if(d&&"waitclick"===d.etat){d.etat="dbclick",g("dbclick");var a=d.target,c=h(d.target,"dbclick");c&&a[b].dbclick(d),d=!1}},stopFindYourWay:function(a){if(d&&"init"===d.etat){var c=Math.abs(a.touch.x-d.mouseStart.x)>Math.abs(a.touch.y-d.mouseStart.y);if(c){d.etat="moveX",g("moveX");var e=h(a.target,"touchX");e&&e[b].touchX(d)}else{d.etat="moveY",g("moveY");var e=h(a.target,"touchY");e&&e[b].touchY(d)}d=!1}}}}();
export default DOM;