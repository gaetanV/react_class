"use strict";var DOM=function(){var a={selection:function(a){DOM.selection(this,a)}},b={fps:24},c={mouseup:[],click:[],mousemove:[],mousewheel:[],refresh:[],resize:[]},d=function(a){if(a.touches){var b=a.touches[0];if(a.touch={x:b.pageX,y:b.pageY},a.touches.length>1){var b=a.touches[1];a.touch2={x:b.pageX,y:b.pageY}}}else a.touch={x:a.clientX,y:a.clientY}},e={refresh:function(){for(var a in c.refresh)c.refresh[a]()},click:function(a){d(a);for(var b in c.click)c.click[b](a);return!1},resize:function(a){d(a);for(var b in c.resize)c.resize[b](a);return!1},mousemove:function(a){d(a);for(var b in c.mousemove)c.mousemove[b](a)},mousewheel:function(a){d(a);for(var b in c.mousewheel)c.mousewheel[b](a)},mouseup:function(a){for(var b in c.mouseup)c.mouseup[b](a)}};setInterval(e.refresh,b.fps),window.addEventListener("resize",e.resize),document.addEventListener(/Firefox/i.test(navigator.userAgent)?"DOMMouseScroll":"mousewheel",e.mousewheel),"ontouchstart"in window||navigator.maxTouchPoints?(document.addEventListener("touchstart",e.click),document.addEventListener("touchmove",e.mousemove),document.addEventListener("touchend",e.mouseup),document.addEventListener("touchleave",e.mouseup)):(document.addEventListener("mousedown",e.click),document.addEventListener("mousemove",e.mousemove),document.addEventListener("mouseup",e.mouseup),document.addEventListener("mouseout",function(a){null===a.toElement&&null===a.relatedTarget&&e.mouseup(a)}));var f=function(b){for(var c in a)b[c]=a[c];return b};return f.extendDOM=function(b){for(var c in b)a[c]=b[c]},f.extendEVENT=function(a){for(var b in a)switch(b){default:throw b+" is not a known extendEVENT";case"click":c.click.push(a[b]);break;case"mouseup":c.mouseup.push(a[b]);break;case"mousemove":c.mousemove.push(a[b]);break;case"mousewheel":c.mousewheel.push(a[b]);break;case"refresh":c.refresh.push(a[b]);break;case"resize":c.resize.push(a[b])}},f.selection=function(a,b){a=a[0]?a[0]:a,b?(a.style.MozUserSelect="text",a.style.webkitUserSelect="text",a.style.oUserSelect="text",a.style.khtmlUserSelect="text",a.style.msUserSelect="text",a.style.userSelect="text"):(a.style.MozUserSelect="none",a.style.webkitUserSelect="none",a.style.oUserSelect="none",a.style.khtmlUserSelect="none",a.style.msUserSelect="none",a.style.userSelect="none")},f.extend=function(b){if(b===HTMLElement)for(var c in a)b.prototype[c]=a[c];else b.fn&&b.fn.extend&&b.fn.extend(a)},f}();!function(){var a=function(a,c,d,e){var f=[1,0,0,1,0,0],g=performance.now(),h=window.getComputedStyle(a),i=h.transform;if("none"!==i){var j=/\((.*)\)/.exec(i);f=j[1].split(",")}this.matrix=f,this.timeStart=g,this.timeEnd=g,this.speed=d,this.dom=a,this.css={transitionDuration:h.transitionDuration,transitionProperty:h.transitionProperty,transitionDelay:h.transitionDelay},a.style.transition="none";var k=b(a),l=parseInt(a.style.left),m=parseInt(a.style.top);0===k.y&&0===k.x||(a.offsetHeight,0!==k.y&&(a.style.top=m+k.y+"px"),0!==k.x&&(a.style.left=l+k.x+"px")),this.css.left=h.left,this.css.top=h.top,this.transform={start:{x:0,y:0},end:{x:0,y:0}},this.pos={start:{x:l,y:m},end:{x:l,y:m}},this.way=c,this.callback=e,this.refresh=!1},b=function(a){var b=window.getComputedStyle(a),c=0,d=0,e=b.transform;if("none"!==e){var f=/\((.*)\)/,g=f.exec(e),h=g[1].split(",");c=parseInt(h[4]),d=parseInt(h[5])}return{x:c,y:d}},c=function(a){var b=a.getBoundingClientRect(),c=window.getComputedStyle(a),d=parseInt(c.paddingTop,10),e=parseInt(c.paddingBottom,10),f=parseInt(c.paddingLeft,10),g=parseInt(c.paddingRight,10),h=a.clientHeight,i=parseInt(c.marginTop,10),j=parseInt(c.borderTopWidth,10);h+=i+j,h+=parseInt(c.borderBottomWidth,10),h+=parseInt(c.marginBottom,10);var k=a.clientWidth;k+=parseInt(c.marginRight,10),k+=parseInt(c.borderRightWidth,10);var l=parseInt(c.marginLeft,10),m=parseInt(c.borderLeftWidth,10);return k+=m+l,{left:b.left+window.scrollX-l,top:b.top+window.scrollY-i,outer:{height:h,width:k},inner:{height:a.clientHeight-(d+e),width:a.clientWidth-(g+f)}}},d=!1;DOM.extendDOM({move:function(b,c,e){var f=this[0]?this[0]:this;d=new a(f,b,c,e)}}),DOM.extendEVENT({refresh:function(){if(d){var a=d;if(a.refresh){var b=a.refresh.touch,c=0,e=0;switch(a.way){case"-x":c+=(a.mouse.x-b.x)*a.speed;break;case"x":c-=(a.mouse.x-b.x)*a.speed;break;case"-y":e+=(a.mouse.y-b.y)*a.speed;break;case"y":e-=(a.mouse.y-b.y)*a.speed;break;case"xy":c-=(a.mouse.x-b.x)*a.speed,e-=(a.mouse.y-b.y)*a.speed}a.transform.end={y:e,x:c},a.dom.style.transform="matrix("+a.matrix[0]+","+a.matrix[1]+","+a.matrix[2]+","+a.matrix[3]+", "+c+", "+e+")",a.refresh=!1}}},mousemove:function(a){d&&(d.mouse||(d.mouse=a.touch),d.refresh=a)},mouseup:function(a){d&&e.stopDragAndDrop()}});var e={stopDragAndDrop:function(){d.pos.end={x:parseInt(d.css.left)+d.transform.end.x,y:parseInt(d.css.top)+d.transform.end.y},d.timeEnd=performance.now();var a=window.getComputedStyle(d.dom);d.dom.style.transform="matrix("+d.matrix[0]+","+d.matrix[1]+","+d.matrix[2]+","+d.matrix[3]+",0,0)","absolute"!==a.position&&"fixed"!==a.position&&"relative"!==a.position||("auto"===d.css.top&&(d.css.top=c(d.dom).top),"auto"===d.css.left&&(d.css.left=c(d.dom).left),d.dom.style.top=parseInt(d.css.top)+d.transform.end.y+"px",d.dom.style.left=parseInt(d.css.left)+d.transform.end.x+"px");var b=d.timeEnd-d.timeStart,e=Math.abs(d.transform.end.x),f=Math.abs(d.transform.end.y);d.vitesse={x:1/(1*b/e),y:1/(1*b/f)},d.dom.offsetHeight,d.dom.style.transitionDuration=d.css.transitionDuration,d.dom.style.transitionProperty=d.css.transitionProperty,d.dom.style.transitionDelay=d.css.transitionDelay,d.callback(d),d=!1}}}(),function(){var a=!1,b=!1,c="data-touchevent",d="_resizeX",e="_resizeY",f={timeLongclick:400,timeDbclick:200,debug:!1},g=!1,h={x:window.innerWidth,y:window.innerHeight},i=function(b){this.etat="init",this.target=b.target,this.timeStart=performance.now(),this.mouseStart=b.touch,this.mouseEnd=b.touch,this.mouseStart2=!1,this.mouseEnd2=!1,this.vitesse={x:0,y:0},this.origin=b.target,b.touch2&&(g.etat="multitouch"),a&&clearTimeout(a)},j=function(a){f.debug&&console.log(a)},k=function(a,b){for(;null!==a;){if(a[c]&&"function"==typeof a[c][b])return a;var a=a.parentNode}return!1};DOM.extendDOM({touchevent:function(a,f){var g=this[0]?this[0]:this,h=function(a,b){if("function"!=typeof b)throw"callback need to be a function";if(g===document.body||!document.body.contains(g))throw"We can't register a event on a dom not in body";if(!g[c]&&(g[c]={}),g[c][a])throw"Event "+a+" is already defined";g[c][a]=b};switch(a){default:throw a+"is not a known event try touchX or touchY";case"click":h("click",f);break;case"longclick":h("longclick",f);break;case"longclickup":h("longclickup",f);break;case"touchX":h("touchX",f);break;case"touchY":h("touchY",f);break;case"dbclick":h("dbclick",f);break;case"scrollUp":h("scrollUp",f);break;case"scrollDown":h("scrollDown",f);break;case"resizeX":h("resizeX",f),g.setAttribute(d,!0);break;case"resizeY":h("resizeY",f),g.setAttribute(e,!0);break;case"zoom":h("zoom",f);break;case"DEBUG":b=f}}}),DOM.extendEVENT({resize:function(a){var b={x:window.innerWidth,y:window.innerHeight};if(b.x!==h.x){h.x=b.x;for(var f=document.querySelectorAll("["+d+"]"),g=0;g<f.length;g++){var i=f[g];i[c]&&"function"==typeof i[c].resizeX&&i[c].resizeX(a)}}if(b.y!==h.y){h.y=b.y;for(var f=document.querySelectorAll("["+e+"]"),g=0;g<f.length;g++){var i=f[g];i[c]&&"function"==typeof i[c].resizeY&&i[c].resizeY(a)}}},click:function(b){if(g)switch(g.etat){case"waitclick":l.stopDbClick();break;case"init":b.touch&&(g.etat="multitouch")}else j("init"),g=new i(b),g.timeout&&clearTimeout(g.timeout),a=setTimeout(function(){l.startLongClick()},f.timeLongclick)},mousemove:function(a){if(g)switch(g.etat){case"init":(Math.abs(a.touch.x-g.mouseStart.x)>4||Math.abs(a.clientY-g.mouseStart.y)>4)&&l.stopFindYourWay(a);break;case"multitouch":g.mouseEnd=a.touch,g.mouseEnd2=a.touch2,g.mouseStart2||(g.mouseStart=a.touch,g.mouseStart2=a.touch2,g.d1=Math.sqrt(Math.pow(g.mouseStart.x-g.mouseStart2.x,2)+Math.pow(g.mouseStart.x-g.mouseStart2.x,2))),a.touch&&a.touch2&&l.startZoom();case"zoom":g.mouseEnd=a.touch,g.mouseEnd2=a.touch2,g.mouseStart2||(g.mouseStart=a.touch,g.mouseStart2=a.touch2,g.d1=Math.sqrt(Math.pow(g.mouseStart.x-g.mouseStart2.x,2)+Math.pow(g.mouseStart.x-g.mouseStart2.x,2))),l.sendZoom()}},mouseup:function(b){if(g)switch(g.etat){default:j("event end by mouseup"),g=!1;break;case"multitouch":g=!1;break;case"waitlongclick":l.stopLongClick();break;case"init":var c=k(g.target,"dbclick");c?(j("waitclick"),g.etat="waitclick",a&&clearTimeout(a),a=setTimeout(function(){"waitclick"===g.etat&&l.stopClick()},f.timeDbclick)):l.stopClick()}},mousewheel:function(a){g||(g=new i(a),g.etat="scroll",a.detail>0?l.stopScrollDown():l.stopScrollUp(),"scrollUp"!==g.etat&&"scrollDown"!==g.etat||a.preventDefault(),g=!1)}});var l={startZoom:function(){if(g&&"multitouch"===g.etat){var a=k(g.target,"zoom");a&&(g.etat="zoom",g.target=a)}},sendZoom:function(){g&&"zoom"===g.etat&&(g.d2=Math.sqrt(Math.pow(g.mouseEnd.x-g.mouseEnd2.x,2)+Math.pow(g.mouseEnd.x-g.mouseEnd2.x,2)),g.target[c].zoom(g))},stopScrollUp:function(){if(g&&"scroll"===g.etat){var a=k(g.target,"scrollUp");a&&(g.target=a,g.etat="scrollUp",a[c].scrollUp(g))}},stopScrollDown:function(){if(g&&"scroll"===g.etat){var a=k(g.target,"scrollDown");a&&(g.target=a,g.etat="scrollDown",a[c].scrollDown(g))}},startLongClick:function(){if(g&&"init"===g.etat){var a=g.target,b=k(g.target,"longclick");b&&(g.etat="waitlongclick",j("waitlongclick"),a[c].longclick(g),g.target=b)}},stopLongClick:function(){if(!g)throw"stopLongClick is call without event";g.etat="longclick",j("longclick");var a=k(g.target,"longclick");a&&a[c].longclickup(g),g=!1},stopClick:function(){if(g){if("init"===g.etat||"waitclick"===g.etat){g.etat="click",j("click");var a=k(g.target,"click");a&&a[c].click(g)}g=!1}},stopDbClick:function(){if(g&&"waitclick"===g.etat){g.etat="dbclick",j("dbclick");var a=k(g.target,"dbclick");a&&a[c].dbclick(g),g=!1}},stopFindYourWay:function(a){if(g&&"init"===g.etat){if(Math.abs(a.touch.x-g.mouseStart.x)>Math.abs(a.touch.y-g.mouseStart.y)){g.etat="moveX",j("moveX");var b=k(a.target,"touchX");b&&b[c].touchX(g)}else{g.etat="moveY",j("moveY");var b=k(a.target,"touchY");b&&b[c].touchY(g)}g=!1}}}}();
                                                                                                                                        
                                                                                                                               
export default DOM;    